{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"LD","Ix":1,"Var":"P_First_Run","X":1},{"__type":"IST","EID":"62038d03-fcc1-405a-9a4a-8cdd7d862d0d","H":477.99999999999989,"Ix":2,"TXT":"\/\/ Configuration of Modbus RTU Communication with KM5E Power Monitoring Device\u000d\u000a\u000d\u000aModbus_RTU_Device_Port_Configuration.DeviceType := _DeviceNXUnit;\u000d\u000aModbus_RTU_Device_Port_Configuration.NxUnit := Modbus_RTU_Unit_Location_ID;\u000d\u000aModbus_RTU_Device_Port_Configuration.PortNo := 1;\u000d\u000a\u000d\u000aModbus_RTU_KM_Slave_Address := 1;\u000d\u000a\u000d\u000a\/\/ First Reading Data Array\u000d\u000a\u000d\u000aModbus_RTU_KM_Read_Command.Fun := _MDB_READ_HOLDING_REGISTERS;\u000d\u000aModbus_RTU_KM_Read_Command.ReadAdr := 16#0000;\u000d\u000aModbus_RTU_KM_Read_Command.ReadSize := 20;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ According to user manual of Modbus Communication 20 is the max number of readings for one read (actually 10 .. 20\/2 = 10 data at one time)\u000d\u000a\u000d\u000a\/\/ Second Reading Data Array\u000d\u000a\u000d\u000aModbus_RTU_KM_Read_2_Command.Fun := _MDB_READ_HOLDING_REGISTERS;\u000d\u000aModbus_RTU_KM_Read_2_Command.ReadAdr := 16#000A;\u000d\u000aModbus_RTU_KM_Read_2_Command.ReadSize := 20;\u000d\u000a\u000d\u000aModbus_RTU_KM_Option.SendDelay := 0;\u000d\u000aModbus_RTU_KM_Option.TimeOut := 20;\u000d\u000aModbus_RTU_KM_Option.NoResponse := FALSE;\u000d\u000aModbus_RTU_KM_Option.Retry := 5;","W":1668,"X":2}],"LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"LD","Ix":1,"Var":"Execute_KM_Reading","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Ix":31,"Name":"Get1sClk","Out":[{"__type":"PF","Arg":""}],"X":2},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"DevicePort","Ix":3,"Type":"ANY","Var":"Modbus_RTU_Device_Port_Configuration"},{"__type":"PRM","Arg":"SlaveAdr","Ix":4,"Type":"UINT","Var":"Modbus_RTU_KM_Slave_Address"},{"__type":"PRM","Arg":"ReadCmd","Ix":5,"Type":"_sSERIAL_MODBUSRTU_READ","Var":"Modbus_RTU_KM_Read_Command"},{"__type":"PRM","Arg":"ReadDat","IO":true,"Ix":6,"Type":"ANY","Var":"Modbus_RTU_Read_Data"},{"__type":"PRM","Arg":"Option","Ix":7,"Type":"_sSERIAL_MODBUSRTU_OPTION","Var":"Modbus_RTU_KM_Option"},{"__type":"PRM","Arg":"Abort","Ix":8,"Type":"BOOL","Var":"Modbus_RTU_KM_Abort"}],"Ix":29,"Name":"NX_ModbusRtuRead","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":9,"Type":"BOOL","Var":"Modbus_RTU_KM_Busy"},{"__type":"PRM","Arg":"CommandAborted","Ix":10,"Type":"BOOL","Var":"Modbus_RTU_KM_Command_Aborted"},{"__type":"PRM","Arg":"Error","Ix":11,"Type":"BOOL","Var":"Modbus_RTU_KM_Error"},{"__type":"PRM","Arg":"ReadDat","IO":true,"Ix":12,"Type":"ANY","Var":"Modbus_RTU_Read_Data"},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":"Modbus_RTU_KM_Error_ID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":14,"Type":"DWORD","Var":"Modbus_RTU_KM_Error_Index"},{"__type":"PRM","Arg":"ReadSize","Ix":15,"Type":"UINT","Var":"Modbus_RTU_KM_Read_Data_Size"}],"X":3,"Var":"KM_Modbus_RTU_Reading_Instance"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"DevicePort","Ix":16,"Type":"ANY","Var":"Modbus_RTU_Device_Port_Configuration"},{"__type":"PRM","Arg":"SlaveAdr","Ix":17,"Type":"UINT","Var":"Modbus_RTU_KM_Slave_Address"},{"__type":"PRM","Arg":"ReadCmd","Ix":18,"Type":"_sSERIAL_MODBUSRTU_READ","Var":"Modbus_RTU_KM_Read_2_Command"},{"__type":"PRM","Arg":"ReadDat","IO":true,"Ix":19,"Type":"ANY","Var":"Modbus_RTU_Read_Data_2"},{"__type":"PRM","Arg":"Option","Ix":20,"Type":"_sSERIAL_MODBUSRTU_OPTION","Var":"Modbus_RTU_KM_Option"},{"__type":"PRM","Arg":"Abort","Ix":21,"Type":"BOOL","Var":"Modbus_RTU_KM_Abort"}],"Ix":30,"Name":"NX_ModbusRtuRead","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":22,"Type":"BOOL","Var":"Modbus_RTU_KM_2_Busy"},{"__type":"PRM","Arg":"CommandAborted","Ix":23,"Type":"BOOL","Var":"Modbus_RTU_KM_2_Command_Aborted"},{"__type":"PRM","Arg":"Error","Ix":24,"Type":"BOOL","Var":"Modbus_RTU_KM_2_Error"},{"__type":"PRM","Arg":"ReadDat","IO":true,"Ix":25,"Type":"ANY","Var":"Modbus_RTU_Read_Data_2"},{"__type":"PRM","Arg":"ErrorID","Ix":26,"Type":"WORD","Var":"Modbus_RTU_KM_2_Error_ID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":27,"Type":"DWORD","Var":"Modbus_RTU_KM_2_Error_Index"},{"__type":"PRM","Arg":"ReadSize","Ix":28,"Type":"UINT","Var":"Modbus_RTU_KM_2_Read_Data_Size"}],"X":4,"Var":"KM_Modbus_RTU_Reading_2_Instance"},{"__type":"ST","Ix":2,"Var":"Modbus_RTU_KM_Read_Done","X":5}],"LRI":32,"RRI":33,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"IST","EID":"71204676-e8df-461b-bc6a-a1bc719506a6","H":784.00000000000034,"Ix":1,"TXT":"\/\/ Separating and Conversion of Receive Data Words\u000d\u000a\u000d\u000a\/\/ Phase 1 Voltage\u000d\u000a\u000d\u000aKM_50_Phase_1_Voltage_Measurement_Word := Modbus_RTU_Read_Data[1];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Volts HEX\u000d\u000aKM_50_Phase_1_Voltage_Measurement_Word_REAL := WORD_TO_REAL(In:=KM_50_Phase_1_Voltage_Measurement_Word);\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Volts REAL x 10\u000d\u000aKM_50_Phase_1_Voltage_Measurement_REAL := KM_50_Phase_1_Voltage_Measurement_Word_REAL \/ 10;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Volts REAL\u000d\u000a\u000d\u000a\/\/ Phase 1 Current\u000d\u000a\u000d\u000aKM_50_Phase_1_Current_Measurement_Word := Modbus_RTU_Read_Data[7];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ mAmps HEX\u000d\u000aKM_50_Phase_1_Current_Measurement_REAL := WORD_TO_REAL(In:=KM_50_Phase_1_Current_Measurement_Word);\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ mAmps REAL\u000d\u000a\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u000d\u000a\/\/ Phase 1 Power Factor\u000d\u000a\u000d\u000aKM_50_Phase_1_Power_Factor_Measurement_Word := Modbus_RTU_Read_Data[13];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Power Factor HEX\u000d\u000aKM_50_Phase_1_Power_Factor_Measurement_Percentage := WORD_TO_USINT(In:=KM_50_Phase_1_Power_Factor_Measurement_Word);\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Power Factor Percentage\u000d\u000a\u000d\u000a\/\/ Phase 1 Frequency\u000d\u000a\u000d\u000aKM_50_Phase_1_Frequency_Measurement_Word := Modbus_RTU_Read_Data[15];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Frequency Hz HEX\u000d\u000aKM_50_Phase_1_Frequency_Measurement_Word_REAL := WORD_TO_REAL(In:=KM_50_Phase_1_Frequency_Measurement_Word);\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Frequency Hz REAL  X 10\u000d\u000aKM_50_Phase_1_Frequency_Measurement_REAL := KM_50_Phase_1_Frequency_Measurement_Word_REAL \/ 10;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Frequency Hz REAL\u000d\u000a\u000d\u000a\/\/ Phase 1 Active Power\u000d\u000a\u000d\u000aKM_50_Phase_1_Active_Power_Measurement_Word := Modbus_RTU_Read_Data[17];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Active Power W HEX\u000d\u000aKM_50_Phase_1_Active_Power_Measurement_Word_REAL := WORD_TO_REAL(In:=KM_50_Phase_1_Active_Power_Measurement_Word);\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Active Power W \/ 10\u000d\u000aKM_50_Phase_1_Active_Power_Measurement_REAL := KM_50_Phase_1_Active_Power_Measurement_Word_REAL \/ 10000;\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Active Power kW\u000d\u000a\u000d\u000a\/\/ Phase 1 Maximum Active Power\u000d\u000a\u000d\u000aKM_50_Phase_1_Maximum_Active_Power_Measurement_Word := Modbus_RTU_Read_Data[19];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Maximum Power W HEX\u000d\u000aKM_50_Phase_1_Maximum_Active_Power_Measurement_Word_REAL := \u0009WORD_TO_REAL(In:=KM_50_Phase_1_Maximum_Active_Power_Measurement_Word);\u0009\u0009\u0009\/\/ Maximum Power kW \/ 100\u000d\u000aKM_50_Phase_1_Maximum_Active_Power_Measurement_Word_REAL_kW := KM_50_Phase_1_Maximum_Active_Power_Measurement_Word_REAL \/ 100;\u0009\u0009\u0009\u0009\u0009\/\/ Maximum Power kW\u000d\u000a\u000d\u000a\/\/ Phase 1 Total Power Consumption\u000d\u000a\u000d\u000aKM_50_Phase_1_Total_Power_Consumption_Measurement_Word := Modbus_RTU_Read_Data_2[5];\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\u0009\/\/ Total Power Consumption Wh\u000d\u000aKM_50_Phase_1_Total_Power_Consumption_Measurement_Word_REAL := WORD_TO_REAL(In:=KM_50_Phase_1_Total_Power_Consumption_Measurement_Word);\u0009\/\/ Total Power Consumption Wh\u000d\u000aKM_50_Phase_1_Maximum_Active_Power_Measurement_Word_REAL_kWH := KM_50_Phase_1_Total_Power_Consumption_Measurement_Word_REAL \/ 10;\u0009\u0009\u0009\u0009\/\/ Total Power Consumption kWh","W":1682.9999999999998,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
